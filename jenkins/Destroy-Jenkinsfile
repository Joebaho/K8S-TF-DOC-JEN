pipeline {
    agent any
    parameters {
        booleanParam(name: 'CONFIRM_DESTROY', defaultValue: false, description: 'Check to confirm destruction')
    }
    environment {
        // Same credentials as above
    }
    stages {
        stage('Checkout') { ... }
        stage('Destroy Infrastructure') {
            when { expression { params.CONFIRM_DESTROY } }
            steps {
                dir('scripts') {
                    sh '''
                        export AUTO_DESTROY=true
                        ./destroy.sh
                    '''
                }
            }
        }
    }
}